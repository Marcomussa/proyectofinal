<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs', {'title': 'Log in'})  %> 
<body>
    <%- include('./partials/header.ejs') %> 
    <section class="contenedorLogIn">
        <article class="aside">
            <div class="logoEnvios">
                <i class="fas fa-truck"></i>
                <p>Envios gratis a toda Argentina en compras superiores a $5000</p>
            </div>
            <div class="logoListaDeseos">
                <i class="fas fa-thumbtack"></i>
                <p>Utiliza la Lista de Deseos para guardar tus productos favoritos</p>
            </div>
        </article>   
        <article class="logIn">
            <h3>Inicia Sesion</h3>
            <div class="logInExterno">
               <!-- <button class='btn btn-primary'>Iniciar con Google</button>
                <button class='btn btn-primary'>Iniciar con Facebook</button>-->
            </div>
        <!-- <span class="separadorLogIn">OR</span>-->

        <form action="/users/profile" method="POST">
            <input type="text" name="emailLogIn" class="form-control" placeholder="Email" id="emailLogIn">
            <input type="password" name="passLogIn" class="form-control" placeholder="Password" id="passwordLogIn">
            <label for="recordarUser">Recordar Usuario</label>
            <input type="checkbox" name="recordarUser" id="recordarUser">
            <input type="submit" value="Enviar" id='submit'>
        </form>

        <div>
            <% if(typeof validacionesLogIn != 'undefined'){ %>
                <% validacionesLogIn.forEach( (validacion) => { %>
                    <p style="color: red;">
                    <%= validacion.msg %> 
                    </p>
                <% }) %> 
            <% } %> 

            <p class="displayNone emailMsg">Ingrese un Email</p>
            <p class="displayNone passMsg">Ingrese una Password</p>

        </div>

        <div>
            <% if(locals.errors && errors.email){ %>
                <span class="valBackLogIn">
                    <%= errors.email.msg %> 
                </span>
            <% } %> 
        </div>
        </article>
    </section>
    <%- include('./partials/footer.ejs') %> 
</body>
</html>

<script>
    
    let qs = (par) => {
        return document.querySelector(par)
    }

    let email = qs('#emailLogIn')
    let password = qs('#passwordLogIn')
    let submit = qs('#submit')
    let emailMsg = qs('.emailMsg')
    let passMsg = qs('.passMsg')
    let valBackendLogIn = qs('.valBackLogIn')

    function validacionesLogIn(e) {
        if(email.value === ''){
            e.preventDefault()
            emailMsg.className = 'displayBlock'
            valBackendLogIn.className = 'displayNone'
        }
        if(password.value === ''){
            e.preventDefault()
            passMsg.className = 'displayBlock'
            valBackendLogIn.className = 'displayNone'
        }
        if(email.value != ''){
            emailMsg.className = 'displayNone'  
        }
        if(password.value != ''){
            passMsg.className = 'displayNone'
        }
    }

    submit.addEventListener('click', validacionesLogIn)

</script>